{"ast":null,"code":"import{useCallback,useMemo,useRef,useEffect}from'react';// Available background tracks\nexport const BACKGROUND_TRACKS=[{id:'none',name:'No Background Music',file:null},{id:'brassbeat',name:'Brass Beat',file:'/audios/brassbeat.mp3'},{id:'hiphop',name:'Hip Hop',file:'/audios/hiphop.mp3'},{id:'urbancosmo',name:'Urban Cosmo',file:'/audios/urbancosmo.mp3'},{id:'peacelovesoul',name:'Peace Love Soul',file:'/audios/peacelovesoul.mp3'},{id:'funkycosmo',name:'Funky Cosmo',file:'/audios/funkycosmo.mp3'},{id:'acousticcosmo',name:'Acoustic Cosmo',file:'/audios/acousticcosmo.mp3'}];export default function useBackgroundMusic(){let selectedTrackId=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'none';let isPlaying=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;const audioRef=useRef(null);const isInitializedRef=useRef(false);// Get the selected track\nconst selectedTrack=useMemo(()=>{return BACKGROUND_TRACKS.find(track=>track.id===selectedTrackId)||BACKGROUND_TRACKS[0];},[selectedTrackId]);// Initialize audio element\nuseEffect(()=>{if(selectedTrack.file&&!audioRef.current){audioRef.current=new Audio(selectedTrack.file);audioRef.current.loop=true;audioRef.current.volume=0.3;// Set volume to 30% to not overpower game sounds\nisInitializedRef.current=true;}else if(!selectedTrack.file&&audioRef.current){// Clean up if switching to 'none'\naudioRef.current.pause();audioRef.current=null;isInitializedRef.current=false;}},[selectedTrack]);// Play/pause based on isPlaying prop\nuseEffect(()=>{if(!audioRef.current||!selectedTrack.file)return;if(isPlaying){audioRef.current.play().catch(error=>{console.error('[BackgroundMusic] Error playing track:',error);});}else{audioRef.current.pause();}},[isPlaying,selectedTrack.file]);// Cleanup on unmount\nuseEffect(()=>{return()=>{if(audioRef.current){audioRef.current.pause();audioRef.current=null;}};},[]);const play=useCallback(()=>{if(audioRef.current&&selectedTrack.file){audioRef.current.play().catch(error=>{console.error('[BackgroundMusic] Error playing track:',error);});}},[selectedTrack.file]);const pause=useCallback(()=>{if(audioRef.current){audioRef.current.pause();}},[]);const setVolume=useCallback(volume=>{if(audioRef.current){audioRef.current.volume=Math.max(0,Math.min(1,volume));}},[]);return{play,pause,setVolume,selectedTrack,isInitialized:isInitializedRef.current};}","map":{"version":3,"names":["useCallback","useMemo","useRef","useEffect","BACKGROUND_TRACKS","id","name","file","useBackgroundMusic","selectedTrackId","arguments","length","undefined","isPlaying","audioRef","isInitializedRef","selectedTrack","find","track","current","Audio","loop","volume","pause","play","catch","error","console","setVolume","Math","max","min","isInitialized"],"sources":["/Users/abinop/code/CosmoCode/cosmo-web-public/src/hooks/useBackgroundMusic.js"],"sourcesContent":["import { useCallback, useMemo, useRef, useEffect } from 'react';\n\n// Available background tracks\nexport const BACKGROUND_TRACKS = [\n  { id: 'none', name: 'No Background Music', file: null },\n  { id: 'brassbeat', name: 'Brass Beat', file: '/audios/brassbeat.mp3' },\n  { id: 'hiphop', name: 'Hip Hop', file: '/audios/hiphop.mp3' },\n  { id: 'urbancosmo', name: 'Urban Cosmo', file: '/audios/urbancosmo.mp3' },\n  { id: 'peacelovesoul', name: 'Peace Love Soul', file: '/audios/peacelovesoul.mp3' },\n  { id: 'funkycosmo', name: 'Funky Cosmo', file: '/audios/funkycosmo.mp3' },\n  { id: 'acousticcosmo', name: 'Acoustic Cosmo', file: '/audios/acousticcosmo.mp3' },\n];\n\nexport default function useBackgroundMusic(selectedTrackId = 'none', isPlaying = false) {\n  const audioRef = useRef(null);\n  const isInitializedRef = useRef(false);\n\n  // Get the selected track\n  const selectedTrack = useMemo(() => {\n    return BACKGROUND_TRACKS.find(track => track.id === selectedTrackId) || BACKGROUND_TRACKS[0];\n  }, [selectedTrackId]);\n\n  // Initialize audio element\n  useEffect(() => {\n    if (selectedTrack.file && !audioRef.current) {\n      audioRef.current = new Audio(selectedTrack.file);\n      audioRef.current.loop = true;\n      audioRef.current.volume = 0.3; // Set volume to 30% to not overpower game sounds\n      isInitializedRef.current = true;\n    } else if (!selectedTrack.file && audioRef.current) {\n      // Clean up if switching to 'none'\n      audioRef.current.pause();\n      audioRef.current = null;\n      isInitializedRef.current = false;\n    }\n  }, [selectedTrack]);\n\n  // Play/pause based on isPlaying prop\n  useEffect(() => {\n    if (!audioRef.current || !selectedTrack.file) return;\n\n    if (isPlaying) {\n      audioRef.current.play().catch(error => {\n        console.error('[BackgroundMusic] Error playing track:', error);\n      });\n    } else {\n      audioRef.current.pause();\n    }\n  }, [isPlaying, selectedTrack.file]);\n\n  // Cleanup on unmount\n  useEffect(() => {\n    return () => {\n      if (audioRef.current) {\n        audioRef.current.pause();\n        audioRef.current = null;\n      }\n    };\n  }, []);\n\n  const play = useCallback(() => {\n    if (audioRef.current && selectedTrack.file) {\n      audioRef.current.play().catch(error => {\n        console.error('[BackgroundMusic] Error playing track:', error);\n      });\n    }\n  }, [selectedTrack.file]);\n\n  const pause = useCallback(() => {\n    if (audioRef.current) {\n      audioRef.current.pause();\n    }\n  }, []);\n\n  const setVolume = useCallback((volume) => {\n    if (audioRef.current) {\n      audioRef.current.volume = Math.max(0, Math.min(1, volume));\n    }\n  }, []);\n\n  return {\n    play,\n    pause,\n    setVolume,\n    selectedTrack,\n    isInitialized: isInitializedRef.current,\n  };\n} "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import React,{useState,useEffect,useMemo}from'react';import{useWebSocket}from'../contexts/WebSocketContext';import useMIDISound from'../hooks/useMIDISound';import wsService from'../services/WebSocketService';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const VisualMusic=()=>{const{connectedDevices,deviceValues,wsConnected}=useWebSocket();const playNote=useMIDISound(true);// Cosmo-compatible color schemes (using 0-4 RGB scale)\nconst cosmoColorMap=[{name:'blue',rgb:[0,0,4],hex:'#0000FF'},{name:'green',rgb:[0,4,0],hex:'#00FF00'},{name:'yellow',rgb:[4,3,0],hex:'#FFCC00'},{name:'orange',rgb:[4,1,0],hex:'#FF4400'},{name:'red',rgb:[4,0,0],hex:'#FF0000'},{name:'purple',rgb:[4,0,4],hex:'#FF00FF'}];// Color schemes for accessibility using Cosmo-compatible colors\nconst colorSchemes={classic:{colors:cosmoColorMap.map(c=>c.hex),names:cosmoColorMap.map(c=>c.name),cosmoRgb:cosmoColorMap.map(c=>c.rgb)},highContrast:{colors:['#FFFFFF','#000000','#FF0000','#00FF00','#0000FF','#FFFF00'],names:['White','Black','Red','Green','Blue','Yellow'],cosmoRgb:[[4,4,4],[0,0,0],[4,0,0],[0,4,0],[0,0,4],[4,4,0]]},pastel:{colors:['#CCE5FF','#CCFFCC','#FFCCCC','#FFCCFF','#FFDDCC','#FFFFCC'],names:['Light Blue','Light Green','Light Red','Light Purple','Light Orange','Light Yellow'],cosmoRgb:[[1,1,4],[1,4,1],[4,1,1],[4,1,4],[4,2,1],[4,4,1]]}};const[currentScheme,setCurrentScheme]=useState('classic');const[isPlaying,setIsPlaying]=useState(false);const[currentNoteIndex,setCurrentNoteIndex]=useState(0);const[tempo,setTempo]=useState(120);// BPM\nconst[selectedPattern,setSelectedPattern]=useState(0);const[customPattern,setCustomPattern]=useState([]);const[recordingMode,setRecordingMode]=useState(false);// Calculate available notes based on connected devices\nconst activeScheme=colorSchemes[currentScheme];const maxNotes=Math.min(connectedDevices.length,6);// Limit to connected devices or 6 max\nconst availableColors=activeScheme.colors.slice(0,maxNotes);const availableNames=activeScheme.names.slice(0,maxNotes);const availableCosmoRgb=activeScheme.cosmoRgb.slice(0,maxNotes);// Pre-defined musical patterns (adjust to available devices)\nconst patterns=useMemo(()=>{const adjustPattern=sequence=>sequence.map(note=>note%Math.max(maxNotes,1));return[{name:\"Simple Scale\",sequence:adjustPattern([0,1,2,3,4,5,0].slice(0,maxNotes+1)),colors:adjustPattern([0,1,2,3,4,5,0].slice(0,maxNotes+1))},{name:\"Twinkle Twinkle\",sequence:adjustPattern([0,0,4,4,5,5,4,3,3,2,2,1,1,0]),colors:adjustPattern([0,0,4,4,5,5,4,3,3,2,2,1,1,0])},{name:\"Mary Had a Little Lamb\",sequence:adjustPattern([2,1,0,1,2,2,2,1,1,1,2,4,4]),colors:adjustPattern([2,1,0,1,2,2,2,1,1,1,2,4,4])},{name:\"Happy Birthday\",sequence:adjustPattern([0,0,1,0,3,2,0,0,1,0,4,3]),colors:adjustPattern([0,0,1,0,3,2,0,0,1,0,4,3])}];},[maxNotes]);const currentPattern=patterns[selectedPattern];// Handle device button presses\nuseEffect(()=>{if(!connectedDevices.length)return;connectedDevices.forEach((device,deviceIndex)=>{const deviceState=deviceValues[device.id];if((deviceState===null||deviceState===void 0?void 0:deviceState.buttonState)===1){const noteIndex=deviceIndex%maxNotes;// Map to available notes\nconst colorIndex=noteIndex%availableColors.length;// Play the note\nplayNote(noteIndex,100,0.3);// Set device LED to corresponding color using Cosmo RGB values\nconst cosmoRgb=availableCosmoRgb[colorIndex];if(cosmoRgb){wsService.setColor(device.id,cosmoRgb[0],cosmoRgb[1],cosmoRgb[2]);}// If in recording mode, add to custom pattern\nif(recordingMode){setCustomPattern(prev=>[...prev,noteIndex]);}}});},[deviceValues,connectedDevices,playNote,activeScheme,recordingMode]);// Auto-play functionality\nuseEffect(()=>{if(!isPlaying)return;const interval=60/tempo*1000;// Convert BPM to milliseconds\nconst timer=setInterval(()=>{const pattern=selectedPattern===patterns.length?customPattern:currentPattern;if(!pattern||selectedPattern!==patterns.length&&!pattern.sequence)return;const sequence=selectedPattern===patterns.length?pattern:pattern.sequence;const colors=selectedPattern===patterns.length?pattern:pattern.colors;if(currentNoteIndex<sequence.length){const noteIndex=sequence[currentNoteIndex];const colorIndex=colors[currentNoteIndex];// Play the note\nplayNote(noteIndex,100,0.3);// Light up corresponding device if available\nif(connectedDevices[colorIndex]&&colorIndex<maxNotes){const cosmoRgb=availableCosmoRgb[colorIndex%availableCosmoRgb.length];if(cosmoRgb){wsService.setColor(connectedDevices[colorIndex].id,cosmoRgb[0],cosmoRgb[1],cosmoRgb[2]);}}setCurrentNoteIndex(prev=>prev+1);}else{// Pattern finished, restart or stop\nsetCurrentNoteIndex(0);setIsPlaying(false);}},interval);return()=>clearInterval(timer);},[isPlaying,currentNoteIndex,tempo,selectedPattern,currentPattern,customPattern,connectedDevices,playNote,activeScheme,patterns.length]);// Control functions\nconst handlePlay=()=>{setIsPlaying(true);setCurrentNoteIndex(0);};const handleStop=()=>{setIsPlaying(false);setCurrentNoteIndex(0);};const handlePatternChange=index=>{setSelectedPattern(index);setCurrentNoteIndex(0);setIsPlaying(false);};const handleRecordingToggle=()=>{setRecordingMode(!recordingMode);if(!recordingMode){setCustomPattern([]);}};const clearCustomPattern=()=>{setCustomPattern([]);};// Pattern display component (like image 1)\nconst PatternDisplay=_ref=>{let{pattern,currentIndex}=_ref;const sequence=selectedPattern===patterns.length?pattern:(pattern===null||pattern===void 0?void 0:pattern.sequence)||[];const colors=selectedPattern===patterns.length?pattern:(pattern===null||pattern===void 0?void 0:pattern.colors)||[];return/*#__PURE__*/_jsx(\"div\",{className:\"mb-6 p-4 bg-black rounded-lg\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-1 mb-2\",children:sequence.map((noteIndex,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"h-12 w-16 rounded \".concat(index===currentIndex?'ring-4 ring-white':''),style:{backgroundColor:availableColors[colors[index]%availableColors.length]}},index))})});};// Current note display (like image 2)\nconst CurrentNoteDisplay=()=>{return/*#__PURE__*/_jsx(\"div\",{className:\"mb-6 p-4 bg-black rounded-lg\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center space-x-4\",children:availableColors.map((color,index)=>{var _deviceValues$connect;return/*#__PURE__*/_jsxs(\"div\",{className:\"relative w-20 h-32 rounded-full flex items-center justify-center\",style:{backgroundColor:color},children:[connectedDevices[index]&&((_deviceValues$connect=deviceValues[connectedDevices[index].id])===null||_deviceValues$connect===void 0?void 0:_deviceValues$connect.buttonState)===1&&/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-white rounded-full\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute bottom-2 text-xs text-black font-bold\",children:availableNames[index]})]},index);})})});};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 max-w-4xl mx-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-800 mb-2\",children:\"Visual Music\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Press Cosmo device buttons to play notes or use auto-play to learn patterns\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-6 p-4 bg-gray-100 rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-3 h-3 rounded-full \".concat(wsConnected?'bg-green-500':'bg-red-500')}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium\",children:wsConnected?'Connected':'Disconnected'}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm text-gray-600\",children:[\"\\u2022 \",connectedDevices.length,\" device(s) connected \\u2022 \",maxNotes,\" notes available\"]}),maxNotes<connectedDevices.length&&/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-orange-600\",children:[\"(Limited to \",maxNotes,\" notes max)\"]})]})}),connectedDevices.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6 p-8 bg-gray-100 rounded-lg text-center\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-700 mb-2\",children:\"No Devices Connected\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Connect Cosmo devices to start making music! Each device will represent a different note.\"})]}):/*#__PURE__*/_jsx(CurrentNoteDisplay,{}),/*#__PURE__*/_jsx(PatternDisplay,{pattern:selectedPattern===patterns.length?customPattern:currentPattern,currentIndex:currentNoteIndex}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-4 rounded-lg shadow\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-3\",children:\"Playback\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2 mb-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handlePlay,disabled:!wsConnected||isPlaying||connectedDevices.length===0,className:\"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600 disabled:opacity-50\",children:\"Play\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleStop,disabled:!wsConnected||connectedDevices.length===0,className:\"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600 disabled:opacity-50\",children:\"Stop\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:[\"Tempo: \",tempo,\" BPM\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"range\",min:\"60\",max:\"200\",value:tempo,onChange:e=>setTempo(parseInt(e.target.value)),className:\"w-full\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-4 rounded-lg shadow\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-3\",children:\"Pattern\"}),/*#__PURE__*/_jsxs(\"select\",{value:selectedPattern,onChange:e=>handlePatternChange(parseInt(e.target.value)),className:\"w-full p-2 border rounded mb-3\",children:[patterns.map((pattern,index)=>/*#__PURE__*/_jsx(\"option\",{value:index,children:pattern.name},index)),/*#__PURE__*/_jsx(\"option\",{value:patterns.length,children:\"Custom Pattern\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2 mb-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleRecordingToggle,disabled:connectedDevices.length===0,className:\"px-4 py-2 rounded disabled:opacity-50 \".concat(recordingMode?'bg-red-500 text-white hover:bg-red-600':'bg-blue-500 text-white hover:bg-blue-600'),children:recordingMode?'Stop Recording':'Record Pattern'}),/*#__PURE__*/_jsx(\"button\",{onClick:clearCustomPattern,className:\"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600\",children:\"Clear\"})]}),recordingMode&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-red-600\",children:\"Recording... Press device buttons to create a pattern\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-4 rounded-lg shadow\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-3\",children:\"Accessibility\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Color Scheme\"}),/*#__PURE__*/_jsxs(\"select\",{value:currentScheme,onChange:e=>setCurrentScheme(e.target.value),className:\"w-full p-2 border rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"classic\",children:\"Classic\"}),/*#__PURE__*/_jsx(\"option\",{value:\"highContrast\",children:\"High Contrast\"}),/*#__PURE__*/_jsx(\"option\",{value:\"pastel\",children:\"Pastel\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-600\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u2022 Press device buttons to play notes and create patterns\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u2022 Use auto-play to learn musical sequences\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u2022 Customize colors for better visibility\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u2022 Record your own patterns by pressing buttons\"})]})]})]});};export default VisualMusic;","map":{"version":3,"names":["React","useState","useEffect","useMemo","useWebSocket","useMIDISound","wsService","jsx","_jsx","jsxs","_jsxs","VisualMusic","connectedDevices","deviceValues","wsConnected","playNote","cosmoColorMap","name","rgb","hex","colorSchemes","classic","colors","map","c","names","cosmoRgb","highContrast","pastel","currentScheme","setCurrentScheme","isPlaying","setIsPlaying","currentNoteIndex","setCurrentNoteIndex","tempo","setTempo","selectedPattern","setSelectedPattern","customPattern","setCustomPattern","recordingMode","setRecordingMode","activeScheme","maxNotes","Math","min","length","availableColors","slice","availableNames","availableCosmoRgb","patterns","adjustPattern","sequence","note","max","currentPattern","forEach","device","deviceIndex","deviceState","id","buttonState","noteIndex","colorIndex","setColor","prev","interval","timer","setInterval","pattern","clearInterval","handlePlay","handleStop","handlePatternChange","index","handleRecordingToggle","clearCustomPattern","PatternDisplay","_ref","currentIndex","className","children","concat","style","backgroundColor","CurrentNoteDisplay","color","_deviceValues$connect","onClick","disabled","type","value","onChange","e","parseInt","target"],"sources":["/Users/abinop/code/CosmoCode/cosmo-web-public/src/components/VisualMusic.js"],"sourcesContent":["import React, { useState, useEffect, useMemo } from 'react';\nimport { useWebSocket } from '../contexts/WebSocketContext';\nimport useMIDISound from '../hooks/useMIDISound';\nimport wsService from '../services/WebSocketService';\n\nconst VisualMusic = () => {\n  const { connectedDevices, deviceValues, wsConnected } = useWebSocket();\n  const playNote = useMIDISound(true);\n\n  // Cosmo-compatible color schemes (using 0-4 RGB scale)\n  const cosmoColorMap = [\n    { name: 'blue', rgb: [0, 0, 4], hex: '#0000FF' },\n    { name: 'green', rgb: [0, 4, 0], hex: '#00FF00' },\n    { name: 'yellow', rgb: [4, 3, 0], hex: '#FFCC00' },\n    { name: 'orange', rgb: [4, 1, 0], hex: '#FF4400' },\n    { name: 'red', rgb: [4, 0, 0], hex: '#FF0000' },\n    { name: 'purple', rgb: [4, 0, 4], hex: '#FF00FF' },\n  ];\n\n  // Color schemes for accessibility using Cosmo-compatible colors\n  const colorSchemes = {\n    classic: {\n      colors: cosmoColorMap.map(c => c.hex),\n      names: cosmoColorMap.map(c => c.name),\n      cosmoRgb: cosmoColorMap.map(c => c.rgb)\n    },\n    highContrast: {\n      colors: ['#FFFFFF', '#000000', '#FF0000', '#00FF00', '#0000FF', '#FFFF00'],\n      names: ['White', 'Black', 'Red', 'Green', 'Blue', 'Yellow'],\n      cosmoRgb: [[4, 4, 4], [0, 0, 0], [4, 0, 0], [0, 4, 0], [0, 0, 4], [4, 4, 0]]\n    },\n    pastel: {\n      colors: ['#CCE5FF', '#CCFFCC', '#FFCCCC', '#FFCCFF', '#FFDDCC', '#FFFFCC'],\n      names: ['Light Blue', 'Light Green', 'Light Red', 'Light Purple', 'Light Orange', 'Light Yellow'],\n      cosmoRgb: [[1, 1, 4], [1, 4, 1], [4, 1, 1], [4, 1, 4], [4, 2, 1], [4, 4, 1]]\n    }\n  };\n\n  const [currentScheme, setCurrentScheme] = useState('classic');\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [currentNoteIndex, setCurrentNoteIndex] = useState(0);\n  const [tempo, setTempo] = useState(120); // BPM\n  const [selectedPattern, setSelectedPattern] = useState(0);\n  const [customPattern, setCustomPattern] = useState([]);\n  const [recordingMode, setRecordingMode] = useState(false);\n\n  // Calculate available notes based on connected devices\n  const activeScheme = colorSchemes[currentScheme];\n  const maxNotes = Math.min(connectedDevices.length, 6); // Limit to connected devices or 6 max\n  const availableColors = activeScheme.colors.slice(0, maxNotes);\n  const availableNames = activeScheme.names.slice(0, maxNotes);\n  const availableCosmoRgb = activeScheme.cosmoRgb.slice(0, maxNotes);\n\n  // Pre-defined musical patterns (adjust to available devices)\n  const patterns = useMemo(() => {\n    const adjustPattern = (sequence) => sequence.map(note => note % Math.max(maxNotes, 1));\n    \n    return [\n      {\n        name: \"Simple Scale\",\n        sequence: adjustPattern([0, 1, 2, 3, 4, 5, 0].slice(0, maxNotes + 1)),\n        colors: adjustPattern([0, 1, 2, 3, 4, 5, 0].slice(0, maxNotes + 1))\n      },\n      {\n        name: \"Twinkle Twinkle\",\n        sequence: adjustPattern([0, 0, 4, 4, 5, 5, 4, 3, 3, 2, 2, 1, 1, 0]),\n        colors: adjustPattern([0, 0, 4, 4, 5, 5, 4, 3, 3, 2, 2, 1, 1, 0])\n      },\n      {\n        name: \"Mary Had a Little Lamb\",\n        sequence: adjustPattern([2, 1, 0, 1, 2, 2, 2, 1, 1, 1, 2, 4, 4]),\n        colors: adjustPattern([2, 1, 0, 1, 2, 2, 2, 1, 1, 1, 2, 4, 4])\n      },\n      {\n        name: \"Happy Birthday\",\n        sequence: adjustPattern([0, 0, 1, 0, 3, 2, 0, 0, 1, 0, 4, 3]),\n        colors: adjustPattern([0, 0, 1, 0, 3, 2, 0, 0, 1, 0, 4, 3])\n      }\n    ];\n  }, [maxNotes]);\n\n  const currentPattern = patterns[selectedPattern];\n\n  // Handle device button presses\n  useEffect(() => {\n    if (!connectedDevices.length) return;\n\n    connectedDevices.forEach((device, deviceIndex) => {\n      const deviceState = deviceValues[device.id];\n      if (deviceState?.buttonState === 1) {\n        const noteIndex = deviceIndex % maxNotes; // Map to available notes\n        const colorIndex = noteIndex % availableColors.length;\n        \n        // Play the note\n        playNote(noteIndex, 100, 0.3);\n        \n        // Set device LED to corresponding color using Cosmo RGB values\n        const cosmoRgb = availableCosmoRgb[colorIndex];\n        if (cosmoRgb) {\n          wsService.setColor(device.id, cosmoRgb[0], cosmoRgb[1], cosmoRgb[2]);\n        }\n\n        // If in recording mode, add to custom pattern\n        if (recordingMode) {\n          setCustomPattern(prev => [...prev, noteIndex]);\n        }\n      }\n    });\n  }, [deviceValues, connectedDevices, playNote, activeScheme, recordingMode]);\n\n  // Auto-play functionality\n  useEffect(() => {\n    if (!isPlaying) return;\n\n    const interval = (60 / tempo) * 1000; // Convert BPM to milliseconds\n    const timer = setInterval(() => {\n      const pattern = selectedPattern === patterns.length ? customPattern : currentPattern;\n      if (!pattern || (selectedPattern !== patterns.length && !pattern.sequence)) return;\n\n      const sequence = selectedPattern === patterns.length ? pattern : pattern.sequence;\n      const colors = selectedPattern === patterns.length ? pattern : pattern.colors;\n\n      if (currentNoteIndex < sequence.length) {\n        const noteIndex = sequence[currentNoteIndex];\n        const colorIndex = colors[currentNoteIndex];\n        \n        // Play the note\n        playNote(noteIndex, 100, 0.3);\n        \n        // Light up corresponding device if available\n        if (connectedDevices[colorIndex] && colorIndex < maxNotes) {\n          const cosmoRgb = availableCosmoRgb[colorIndex % availableCosmoRgb.length];\n          if (cosmoRgb) {\n            wsService.setColor(connectedDevices[colorIndex].id, cosmoRgb[0], cosmoRgb[1], cosmoRgb[2]);\n          }\n        }\n\n        setCurrentNoteIndex(prev => prev + 1);\n      } else {\n        // Pattern finished, restart or stop\n        setCurrentNoteIndex(0);\n        setIsPlaying(false);\n      }\n    }, interval);\n\n    return () => clearInterval(timer);\n  }, [isPlaying, currentNoteIndex, tempo, selectedPattern, currentPattern, customPattern, connectedDevices, playNote, activeScheme, patterns.length]);\n\n  // Control functions\n  const handlePlay = () => {\n    setIsPlaying(true);\n    setCurrentNoteIndex(0);\n  };\n\n  const handleStop = () => {\n    setIsPlaying(false);\n    setCurrentNoteIndex(0);\n  };\n\n  const handlePatternChange = (index) => {\n    setSelectedPattern(index);\n    setCurrentNoteIndex(0);\n    setIsPlaying(false);\n  };\n\n  const handleRecordingToggle = () => {\n    setRecordingMode(!recordingMode);\n    if (!recordingMode) {\n      setCustomPattern([]);\n    }\n  };\n\n  const clearCustomPattern = () => {\n    setCustomPattern([]);\n  };\n\n  // Pattern display component (like image 1)\n  const PatternDisplay = ({ pattern, currentIndex }) => {\n    const sequence = selectedPattern === patterns.length ? pattern : pattern?.sequence || [];\n    const colors = selectedPattern === patterns.length ? pattern : pattern?.colors || [];\n\n    return (\n      <div className=\"mb-6 p-4 bg-black rounded-lg\">\n        <div className=\"flex flex-wrap gap-1 mb-2\">\n          {sequence.map((noteIndex, index) => (\n            <div\n              key={index}\n              className={`h-12 w-16 rounded ${\n                index === currentIndex ? 'ring-4 ring-white' : ''\n              }`}\n              style={{\n                backgroundColor: availableColors[colors[index] % availableColors.length]\n              }}\n            />\n          ))}\n        </div>\n      </div>\n    );\n  };\n\n  // Current note display (like image 2)\n  const CurrentNoteDisplay = () => {\n    return (\n      <div className=\"mb-6 p-4 bg-black rounded-lg\">\n        <div className=\"flex justify-center space-x-4\">\n          {availableColors.map((color, index) => (\n            <div\n              key={index}\n              className=\"relative w-20 h-32 rounded-full flex items-center justify-center\"\n              style={{ backgroundColor: color }}\n            >\n              {connectedDevices[index] && deviceValues[connectedDevices[index].id]?.buttonState === 1 && (\n                <div className=\"w-8 h-8 bg-white rounded-full\" />\n              )}\n              <div className=\"absolute bottom-2 text-xs text-black font-bold\">\n                {availableNames[index]}\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"p-6 max-w-4xl mx-auto\">\n      <div className=\"mb-6\">\n        <h1 className=\"text-3xl font-bold text-gray-800 mb-2\">Visual Music</h1>\n        <p className=\"text-gray-600\">\n          Press Cosmo device buttons to play notes or use auto-play to learn patterns\n        </p>\n      </div>\n\n      {/* Connection Status */}\n      <div className=\"mb-6 p-4 bg-gray-100 rounded-lg\">\n        <div className=\"flex items-center space-x-2\">\n          <div className={`w-3 h-3 rounded-full ${wsConnected ? 'bg-green-500' : 'bg-red-500'}`} />\n          <span className=\"text-sm font-medium\">\n            {wsConnected ? 'Connected' : 'Disconnected'}\n          </span>\n          <span className=\"text-sm text-gray-600\">\n            • {connectedDevices.length} device(s) connected • {maxNotes} notes available\n          </span>\n          {maxNotes < connectedDevices.length && (\n            <span className=\"text-xs text-orange-600\">\n              (Limited to {maxNotes} notes max)\n            </span>\n          )}\n        </div>\n      </div>\n\n      {/* Current Note Display */}\n      {connectedDevices.length === 0 ? (\n        <div className=\"mb-6 p-8 bg-gray-100 rounded-lg text-center\">\n          <h3 className=\"text-lg font-semibold text-gray-700 mb-2\">No Devices Connected</h3>\n          <p className=\"text-gray-600\">\n            Connect Cosmo devices to start making music! Each device will represent a different note.\n          </p>\n        </div>\n      ) : (\n        <CurrentNoteDisplay />\n      )}\n\n      {/* Pattern Display */}\n      <PatternDisplay \n        pattern={selectedPattern === patterns.length ? customPattern : currentPattern} \n        currentIndex={currentNoteIndex}\n      />\n\n      {/* Controls */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6\">\n        {/* Playback Controls */}\n        <div className=\"bg-white p-4 rounded-lg shadow\">\n          <h3 className=\"text-lg font-semibold mb-3\">Playback</h3>\n          <div className=\"flex space-x-2 mb-3\">\n            <button\n              onClick={handlePlay}\n              disabled={!wsConnected || isPlaying || connectedDevices.length === 0}\n              className=\"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600 disabled:opacity-50\"\n            >\n              Play\n            </button>\n            <button\n              onClick={handleStop}\n              disabled={!wsConnected || connectedDevices.length === 0}\n              className=\"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600 disabled:opacity-50\"\n            >\n              Stop\n            </button>\n          </div>\n          <div className=\"mb-3\">\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Tempo: {tempo} BPM\n            </label>\n            <input\n              type=\"range\"\n              min=\"60\"\n              max=\"200\"\n              value={tempo}\n              onChange={(e) => setTempo(parseInt(e.target.value))}\n              className=\"w-full\"\n            />\n          </div>\n        </div>\n\n        {/* Pattern Selection */}\n        <div className=\"bg-white p-4 rounded-lg shadow\">\n          <h3 className=\"text-lg font-semibold mb-3\">Pattern</h3>\n          <select\n            value={selectedPattern}\n            onChange={(e) => handlePatternChange(parseInt(e.target.value))}\n            className=\"w-full p-2 border rounded mb-3\"\n          >\n            {patterns.map((pattern, index) => (\n              <option key={index} value={index}>\n                {pattern.name}\n              </option>\n            ))}\n            <option value={patterns.length}>Custom Pattern</option>\n          </select>\n          \n          {/* Recording Controls */}\n          <div className=\"flex space-x-2 mb-3\">\n            <button\n              onClick={handleRecordingToggle}\n              disabled={connectedDevices.length === 0}\n              className={`px-4 py-2 rounded disabled:opacity-50 ${\n                recordingMode \n                  ? 'bg-red-500 text-white hover:bg-red-600' \n                  : 'bg-blue-500 text-white hover:bg-blue-600'\n              }`}\n            >\n              {recordingMode ? 'Stop Recording' : 'Record Pattern'}\n            </button>\n            <button\n              onClick={clearCustomPattern}\n              className=\"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600\"\n            >\n              Clear\n            </button>\n          </div>\n          \n          {recordingMode && (\n            <p className=\"text-sm text-red-600\">\n              Recording... Press device buttons to create a pattern\n            </p>\n          )}\n        </div>\n      </div>\n\n      {/* Accessibility Controls */}\n      <div className=\"bg-white p-4 rounded-lg shadow\">\n        <h3 className=\"text-lg font-semibold mb-3\">Accessibility</h3>\n        <div className=\"mb-3\">\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n            Color Scheme\n          </label>\n          <select\n            value={currentScheme}\n            onChange={(e) => setCurrentScheme(e.target.value)}\n            className=\"w-full p-2 border rounded\"\n          >\n            <option value=\"classic\">Classic</option>\n            <option value=\"highContrast\">High Contrast</option>\n            <option value=\"pastel\">Pastel</option>\n          </select>\n        </div>\n        <div className=\"text-sm text-gray-600\">\n          <p>• Press device buttons to play notes and create patterns</p>\n          <p>• Use auto-play to learn musical sequences</p>\n          <p>• Customize colors for better visibility</p>\n          <p>• Record your own patterns by pressing buttons</p>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default VisualMusic;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
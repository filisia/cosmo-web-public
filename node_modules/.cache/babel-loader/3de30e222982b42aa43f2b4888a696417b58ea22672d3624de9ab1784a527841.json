{"ast":null,"code":"import{useCallback,useMemo}from'react';// MIDI notes corresponding to the Swift example: [72, 76, 79, 83, 84, 88]\n// These are C5, E5, G5, B5, C6, E6\nconst MIDI_NOTES=[72,76,79,83,84,88];export default function useMIDISound(){let soundEnabled=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;// Create audio context and oscillator\nconst audioContext=useMemo(()=>{if(typeof window!=='undefined'&&window.AudioContext){return new(window.AudioContext||window.webkitAudioContext)();}return null;},[]);const playNote=useCallback(function(){let noteIndex=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;let velocity=arguments.length>1&&arguments[1]!==undefined?arguments[1]:100;let duration=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0.3;if(!soundEnabled||!audioContext)return;try{// Get the MIDI note number\nconst midiNote=MIDI_NOTES[noteIndex%MIDI_NOTES.length];// Convert MIDI note to frequency\nconst frequency=440*Math.pow(2,(midiNote-69)/12);// Create oscillator\nconst oscillator=audioContext.createOscillator();const gainNode=audioContext.createGain();// Connect nodes\noscillator.connect(gainNode);gainNode.connect(audioContext.destination);// Set oscillator properties\noscillator.type='sine';oscillator.frequency.setValueAtTime(frequency,audioContext.currentTime);// Set gain (volume) based on velocity\nconst gain=velocity/100*0.3;// Scale down to prevent clipping\ngainNode.gain.setValueAtTime(0,audioContext.currentTime);gainNode.gain.linearRampToValueAtTime(gain,audioContext.currentTime+0.01);gainNode.gain.exponentialRampToValueAtTime(0.001,audioContext.currentTime+duration);// Start and stop oscillator\noscillator.start(audioContext.currentTime);oscillator.stop(audioContext.currentTime+duration);console.log(\"[MIDI] Playing note \".concat(midiNote,\" (\").concat(frequency.toFixed(1),\"Hz) with velocity \").concat(velocity));}catch(error){console.error('[MIDI] Error playing note:',error);}},[soundEnabled,audioContext]);return playNote;}","map":{"version":3,"names":["useCallback","useMemo","MIDI_NOTES","useMIDISound","soundEnabled","arguments","length","undefined","audioContext","window","AudioContext","webkitAudioContext","playNote","noteIndex","velocity","duration","midiNote","frequency","Math","pow","oscillator","createOscillator","gainNode","createGain","connect","destination","type","setValueAtTime","currentTime","gain","linearRampToValueAtTime","exponentialRampToValueAtTime","start","stop","console","log","concat","toFixed","error"],"sources":["/Users/abinop/code/CosmoCode/cosmo-web-public/src/hooks/useMIDISound.js"],"sourcesContent":["import { useCallback, useMemo } from 'react';\n\n// MIDI notes corresponding to the Swift example: [72, 76, 79, 83, 84, 88]\n// These are C5, E5, G5, B5, C6, E6\nconst MIDI_NOTES = [72, 76, 79, 83, 84, 88];\n\nexport default function useMIDISound(soundEnabled = true) {\n  // Create audio context and oscillator\n  const audioContext = useMemo(() => {\n    if (typeof window !== 'undefined' && window.AudioContext) {\n      return new (window.AudioContext || window.webkitAudioContext)();\n    }\n    return null;\n  }, []);\n\n  const playNote = useCallback((noteIndex = 0, velocity = 100, duration = 0.3) => {\n    if (!soundEnabled || !audioContext) return;\n\n    try {\n      // Get the MIDI note number\n      const midiNote = MIDI_NOTES[noteIndex % MIDI_NOTES.length];\n      \n      // Convert MIDI note to frequency\n      const frequency = 440 * Math.pow(2, (midiNote - 69) / 12);\n      \n      // Create oscillator\n      const oscillator = audioContext.createOscillator();\n      const gainNode = audioContext.createGain();\n      \n      // Connect nodes\n      oscillator.connect(gainNode);\n      gainNode.connect(audioContext.destination);\n      \n      // Set oscillator properties\n      oscillator.type = 'sine';\n      oscillator.frequency.setValueAtTime(frequency, audioContext.currentTime);\n      \n      // Set gain (volume) based on velocity\n      const gain = (velocity / 100) * 0.3; // Scale down to prevent clipping\n      gainNode.gain.setValueAtTime(0, audioContext.currentTime);\n      gainNode.gain.linearRampToValueAtTime(gain, audioContext.currentTime + 0.01);\n      gainNode.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + duration);\n      \n      // Start and stop oscillator\n      oscillator.start(audioContext.currentTime);\n      oscillator.stop(audioContext.currentTime + duration);\n      \n      console.log(`[MIDI] Playing note ${midiNote} (${frequency.toFixed(1)}Hz) with velocity ${velocity}`);\n    } catch (error) {\n      console.error('[MIDI] Error playing note:', error);\n    }\n  }, [soundEnabled, audioContext]);\n\n  return playNote;\n} "],"mappings":"AAAA,OAASA,WAAW,CAAEC,OAAO,KAAQ,OAAO,CAE5C;AACA;AACA,KAAM,CAAAC,UAAU,CAAG,CAAC,EAAE,CAAE,EAAE,CAAE,EAAE,CAAE,EAAE,CAAE,EAAE,CAAE,EAAE,CAAC,CAE3C,cAAe,SAAS,CAAAC,YAAYA,CAAA,CAAsB,IAArB,CAAAC,YAAY,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,IAAI,CACtD;AACA,KAAM,CAAAG,YAAY,CAAGP,OAAO,CAAC,IAAM,CACjC,GAAI,MAAO,CAAAQ,MAAM,GAAK,WAAW,EAAIA,MAAM,CAACC,YAAY,CAAE,CACxD,MAAO,KAAKD,MAAM,CAACC,YAAY,EAAID,MAAM,CAACE,kBAAkB,EAAE,CAAC,CACjE,CACA,MAAO,KAAI,CACb,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAC,QAAQ,CAAGZ,WAAW,CAAC,UAAmD,IAAlD,CAAAa,SAAS,CAAAR,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,CAAC,IAAE,CAAAS,QAAQ,CAAAT,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,GAAG,IAAE,CAAAU,QAAQ,CAAAV,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,GAAG,CACzE,GAAI,CAACD,YAAY,EAAI,CAACI,YAAY,CAAE,OAEpC,GAAI,CACF;AACA,KAAM,CAAAQ,QAAQ,CAAGd,UAAU,CAACW,SAAS,CAAGX,UAAU,CAACI,MAAM,CAAC,CAE1D;AACA,KAAM,CAAAW,SAAS,CAAG,GAAG,CAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,CAAE,CAACH,QAAQ,CAAG,EAAE,EAAI,EAAE,CAAC,CAEzD;AACA,KAAM,CAAAI,UAAU,CAAGZ,YAAY,CAACa,gBAAgB,CAAC,CAAC,CAClD,KAAM,CAAAC,QAAQ,CAAGd,YAAY,CAACe,UAAU,CAAC,CAAC,CAE1C;AACAH,UAAU,CAACI,OAAO,CAACF,QAAQ,CAAC,CAC5BA,QAAQ,CAACE,OAAO,CAAChB,YAAY,CAACiB,WAAW,CAAC,CAE1C;AACAL,UAAU,CAACM,IAAI,CAAG,MAAM,CACxBN,UAAU,CAACH,SAAS,CAACU,cAAc,CAACV,SAAS,CAAET,YAAY,CAACoB,WAAW,CAAC,CAExE;AACA,KAAM,CAAAC,IAAI,CAAIf,QAAQ,CAAG,GAAG,CAAI,GAAG,CAAE;AACrCQ,QAAQ,CAACO,IAAI,CAACF,cAAc,CAAC,CAAC,CAAEnB,YAAY,CAACoB,WAAW,CAAC,CACzDN,QAAQ,CAACO,IAAI,CAACC,uBAAuB,CAACD,IAAI,CAAErB,YAAY,CAACoB,WAAW,CAAG,IAAI,CAAC,CAC5EN,QAAQ,CAACO,IAAI,CAACE,4BAA4B,CAAC,KAAK,CAAEvB,YAAY,CAACoB,WAAW,CAAGb,QAAQ,CAAC,CAEtF;AACAK,UAAU,CAACY,KAAK,CAACxB,YAAY,CAACoB,WAAW,CAAC,CAC1CR,UAAU,CAACa,IAAI,CAACzB,YAAY,CAACoB,WAAW,CAAGb,QAAQ,CAAC,CAEpDmB,OAAO,CAACC,GAAG,wBAAAC,MAAA,CAAwBpB,QAAQ,OAAAoB,MAAA,CAAKnB,SAAS,CAACoB,OAAO,CAAC,CAAC,CAAC,uBAAAD,MAAA,CAAqBtB,QAAQ,CAAE,CAAC,CACtG,CAAE,MAAOwB,KAAK,CAAE,CACdJ,OAAO,CAACI,KAAK,CAAC,4BAA4B,CAAEA,KAAK,CAAC,CACpD,CACF,CAAC,CAAE,CAAClC,YAAY,CAAEI,YAAY,CAAC,CAAC,CAEhC,MAAO,CAAAI,QAAQ,CACjB"},"metadata":{},"sourceType":"module","externalDependencies":[]}